<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Link</title>
    <link rel="stylesheet" href="../assets/style.css">
</head>
<body>

    <div class="link-nav">
        <div class="logo">
           <a href="main-page.html"> <img src="../assets/img/1.jpeg" width="149" height="63" alt=""></a>
        </div>
        <a class="return-list" href="#">
           <h2><svg class="svg-arrow" width="28" height="24" viewBox="0 0 28 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M0.939453 10.9392C0.353604 11.5249 0.353503 12.4747 0.939228 13.0605L10.4842 22.6075C11.0699 23.1933 12.0196 23.1934 12.6055 22.6077C13.1913 22.022 13.1914 21.0722 12.6057 20.4864L4.12132 12.0002L12.6075 3.51583C13.1934 2.93011 13.1935 1.98036 12.6077 1.39451C12.022 0.808661 11.0723 0.80856 10.4864 1.39428L0.939453 10.9392ZM28.0002 10.5027L2.00016 10.5L1.99984 13.5L27.9998 13.5027L28.0002 10.5027Z" fill="#484848"/>
                </svg>
                <a href="results-page.html" style="color: black;position: relative;
                top: 9px;"> Return To List Page</a></h2>
        </a>
</div>

<div class="add-link-section">
    <div class="input-container">
        <div class="input-group">
            <label for="name">Name Surname</label>
            <input type="text" id="name" name="name" placeholder="Enter your name">
            <div id="error-name"></div>
        </div>
    
        <div class="input-group">
            <label for="country">Country</label>
            <input type="text" id="country" name="country" placeholder="Enter your country">
            <div id="error-country"></div>
        </div>
    
        <div class="input-group">
            <label for="city">City</label>
            <input type="text" id="city" name="city" placeholder="Enter your city">
            <div id="error-city"></div>
        </div>
    
        <div class="input-group">
            <label for="email">Email</label>
            <input type="email" id="email" name="email" placeholder="Enter your email">
            <div id="error-email"></div>
        </div>
    
        <div class="input-group">
            <label for="website">Website</label>
            <input type="url" id="website" name="website" placeholder="Enter your website">
            <div id="error-website"></div>
        </div>
        <button class="add-button"  onclick="checkInputs()">Add</button>
    </div>

    <div class="popup" id="popup">
        <div class="popup-content">
            <div>
                <div class="popup-title">Error while adding link element</div>
                <div class="popup-description">Name and surname should contain at least 2 words.</div>
            </div>
            <svg width="70" height="32" viewBox="0 0 70 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect width="70" height="32" rx="16" fill="#FF4E78"/>
                <path d="M17.5831 22V10.3636H24.8786V11.875H19.3388V15.4205H24.4979V16.9261H19.3388V20.4886H24.9467V22H17.5831ZM27.0874 22V13.2727H28.7294V14.6591H28.8203C28.9794 14.1894 29.2597 13.8201 29.6612 13.5511C30.0665 13.2784 30.5249 13.142 31.0362 13.142C31.1423 13.142 31.2673 13.1458 31.4112 13.1534C31.5589 13.161 31.6745 13.1705 31.7578 13.1818V14.8068C31.6896 14.7879 31.5684 14.767 31.3942 14.7443C31.2199 14.7178 31.0457 14.7045 30.8714 14.7045C30.4699 14.7045 30.112 14.7898 29.7976 14.9602C29.487 15.1269 29.2408 15.3598 29.0589 15.6591C28.8771 15.9545 28.7862 16.2917 28.7862 16.6705V22H27.0874ZM33.228 22V13.2727H34.87V14.6591H34.9609C35.12 14.1894 35.4003 13.8201 35.8018 13.5511C36.2071 13.2784 36.6655 13.142 37.1768 13.142C37.2829 13.142 37.4079 13.1458 37.5518 13.1534C37.6996 13.161 37.8151 13.1705 37.8984 13.1818V14.8068C37.8303 14.7879 37.709 14.767 37.5348 14.7443C37.3606 14.7178 37.1863 14.7045 37.0121 14.7045C36.6106 14.7045 36.2526 14.7898 35.9382 14.9602C35.6276 15.1269 35.3814 15.3598 35.1996 15.6591C35.0178 15.9545 34.9268 16.2917 34.9268 16.6705V22H33.228ZM42.7322 22.1761C41.9141 22.1761 41.2 21.9886 40.5902 21.6136C39.9804 21.2386 39.5069 20.714 39.1697 20.0398C38.8326 19.3655 38.6641 18.5777 38.6641 17.6761C38.6641 16.7708 38.8326 15.9792 39.1697 15.3011C39.5069 14.6231 39.9804 14.0966 40.5902 13.7216C41.2 13.3466 41.9141 13.1591 42.7322 13.1591C43.5504 13.1591 44.2644 13.3466 44.8743 13.7216C45.4841 14.0966 45.9576 14.6231 46.2947 15.3011C46.6319 15.9792 46.8004 16.7708 46.8004 17.6761C46.8004 18.5777 46.6319 19.3655 46.2947 20.0398C45.9576 20.714 45.4841 21.2386 44.8743 21.6136C44.2644 21.9886 43.5504 22.1761 42.7322 22.1761ZM42.7379 20.75C43.2682 20.75 43.7076 20.6098 44.0561 20.3295C44.4046 20.0492 44.6622 19.6761 44.8288 19.2102C44.9993 18.7443 45.0845 18.2311 45.0845 17.6705C45.0845 17.1136 44.9993 16.6023 44.8288 16.1364C44.6622 15.6667 44.4046 15.2898 44.0561 15.0057C43.7076 14.7216 43.2682 14.5795 42.7379 14.5795C42.2038 14.5795 41.7607 14.7216 41.4084 15.0057C41.0599 15.2898 40.8004 15.6667 40.63 16.1364C40.4633 16.6023 40.38 17.1136 40.38 17.6705C40.38 18.2311 40.4633 18.7443 40.63 19.2102C40.8004 19.6761 41.0599 20.0492 41.4084 20.3295C41.7607 20.6098 42.2038 20.75 42.7379 20.75ZM48.6967 22V13.2727H50.3388V14.6591H50.4297C50.5888 14.1894 50.8691 13.8201 51.2706 13.5511C51.6759 13.2784 52.1342 13.142 52.6456 13.142C52.7517 13.142 52.8767 13.1458 53.0206 13.1534C53.1683 13.161 53.2839 13.1705 53.3672 13.1818V14.8068C53.299 14.7879 53.1778 14.767 53.0036 14.7443C52.8293 14.7178 52.6551 14.7045 52.4808 14.7045C52.0793 14.7045 51.7214 14.7898 51.407 14.9602C51.0964 15.1269 50.8501 15.3598 50.6683 15.6591C50.4865 15.9545 50.3956 16.2917 50.3956 16.6705V22H48.6967Z" fill="white"/>
                </svg>
                
            <div class="close-btn" onclick="closePopup()"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M15 9L9 15M9 9L15 15M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12Z" stroke="#090A0A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                </div>
        </div>
    </div>
</div>

<script>
    function validateEmail(email) {
            var emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        }

        function validateURL(url) {
            var urlRegex = /^(ftp|http|https):\/\/[^ "]+$/;
            return urlRegex.test(url);
        }

        function addRecord() {
            var nameValue = document.getElementById("name").value.trim();
            var countryValue = document.getElementById("country").value.trim();
            var cityValue = document.getElementById("city").value.trim();
            var emailValue = document.getElementById("email").value.trim();
            var websiteValue = document.getElementById("website").value.trim();

            var minifyURL = `https://ulvis.net/API/write/get?url=${websiteValue}&private=1`;

            var record = {
                name: nameValue,
                country: countryValue,
                city: cityValue,
                email: emailValue,
                website: minifyURL 
            };

            if (localStorage.getItem('records') === null) {
                var records = [];
                records.push(record);
                localStorage.setItem('records', JSON.stringify(records));
            } else {
                var records = JSON.parse(localStorage.getItem('records'));
                records.push(record);
                localStorage.setItem('records', JSON.stringify(records));
            }

            alert('Added');
        }
    function checkInputs() {
        var nameInput = document.getElementById("name");
        var countryInput = document.getElementById("country");
        var cityInput = document.getElementById("city");
        var emailInput = document.getElementById("email");
        var websiteInput = document.getElementById("website");
        var addButton = document.querySelector(".add-button");

        var nameValue = nameInput.value.trim();
        var countryValue = countryInput.value.trim();
        var cityValue = cityInput.value.trim();
        var emailValue = emailInput.value.trim();
        var websiteValue = websiteInput.value.trim();

        document.getElementById("error-name").innerHTML = "";
        document.getElementById("error-country").innerHTML = "";
        document.getElementById("error-city").innerHTML = "";
        document.getElementById("error-email").innerHTML = "";
        document.getElementById("error-website").innerHTML = "";
        
        
        if (nameValue === "") {
            document.getElementById("popup").style.display = "block";
            var nameErrorText = document.getElementById("error-name");
            nameInput.style.border = "2px solid #FF4E78";
            document.documentElement.style.setProperty('--placeholder-color', 'red'); 
            document.querySelector('label[for="name"]').style.color = "#FF4E78";
            nameErrorText.innerHTML = "Name and surname should contain at least 2 words.";
            nameErrorText.style.color="red";
        }

        if (countryValue === "") {
            var countryErrorText = document.getElementById("error-country");
            countryErrorText.innerHTML = "Country is required.";
            countryErrorText.style.color="red";
            countryInput.style.border = "2px solid #FF4E78";
            document.querySelector('label[for="country"]').style.color = "#FF4E78";
        }
        if (cityValue === "") {
            var cityErrorText = document.getElementById("error-city");
            cityErrorText.innerHTML = "City is required.";
            cityErrorText.style.color="red";
            cityInput.style.border = "2px solid #FF4E78";
            document.querySelector('label[for="city"]').style.color = "#FF4E78";
        }
        if (emailValue === "") {
            var mailErrorText = document.getElementById("error-email");
            mailErrorText.innerHTML = "Email is required.";
            mailErrorText.style.color="red";
            emailInput.style.border = "2px solid #FF4E78";
            document.querySelector('label[for="email"]').style.color = "#FF4E78";
        }
        if (websiteValue === "") {
            var siteErrorText = document.getElementById("error-website");
            siteErrorText.innerHTML = "Website is required.";
            siteErrorText.style.color="red";
            websiteInput.style.border = "2px solid #FF4E78";
            document.querySelector('label[for="website"]').style.color = "#FF4E78";
        }

        if (nameValue !== "" && countryValue !== "" && cityValue !== "" && emailValue !== "" && websiteValue !== "") {
            addButton.disabled = false;
            addRecord();
        } else {
            addButton.disabled = true;
        }
    }

        function closePopup() {
            document.getElementById("popup").style.display = "none";
        }
</script>
</body>
</html>